<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>Red neuronal</title>

</head>
<body onload="update()">
    
	<!-- <script src="https://unpkg.com/brain.js"></script> -->

    <div id="main">

    <form onchange="update()">
        <fieldset>
            <legend>Seleccione la edad:</legend>
            
            <p id="ageInput">Edad: 50</p>
            <input name="age" type="range" min="0" max="100" value="50">
        </fieldset>

        <fieldset>
            <legend>Seleccione el Genero:</legend>
        
            <div>
              <input type="radio" id="male" name="gender" value="1"
                     checked>
              <label for="male">Masculino</label>
            </div>
        
            <div>
              <input type="radio" id="feminine" name="gender" value="0">
              <label for="feminine">Femenino</label>
            </div>        
        </fieldset>
    </form>

    <fieldset>
        <legend>Resultado:</legend>
    
        <div id="result" style="width: 100%; height: 100px;">
            <p id="resultText"></p>
        </div>    
        
    </fieldset>        

    </div>

    <script src="//unpkg.com/brain.js"></script>

    <script type="text/javascript">

        var network = new brain.NeuralNetwork();

        network.train([

            /// --- Opt 1 -- ///
            /*
            {input: {age: 0.9, gender: 0}, output: {g: 0.6, b: 0.6, r: 0.6 }},
            {input: {age: 0.6, gender: 0}, output: {g: 0.5, b: 0.4, r: 0.7 }},
            {input: {age: 0.3, gender: 0}, output: {g: 0.4, b: 0.2, r: 0.8 }},
            {input: {age:  0,  gender: 0}, output: {g: 0.0, b: 0.0, r: 0.9  }},

            {input: {age: 0.9, gender: 1}, output: {g: 0.6, r: 0.6, b: 0.6 }},
            {input: {age: 0.6, gender: 1}, output: {g: 0.5, r: 0.4, b: 0.7 }},
            {input: {age: 0.3, gender: 1}, output: {g: 0.4, r: 0.2, b: 0.8 }},
            {input: {age:   0, gender: 1}, output: {g: 0.0, r: 0.0, b: 0.9 }}
            */

            /// --- Opt 2 -- ///
            
            {input: {age:   0, gender: 1}, output: {g:   1, b: 0.9, r: 0.9 }},
            {input: {age: 0.3, gender: 1}, output: {g: 0.9, b: 0.9, r: 0.6 }},
            {input: {age: 0.6, gender: 1}, output: {g: 0.9, b: 0.9, r: 0.3 }},
            {input: {age: 0.9, gender: 1}, output: {g: 0.3, b: 0.9, r: 0.0  }},

            {input: {age:   9, gender: 0}, output: {g: 0.6, r: 0.9, b: 0.9 }},
            {input: {age: 0.3, gender: 0}, output: {g: 0.5, r: 0.9, b: 0.6 }},
            {input: {age: 0.6, gender: 0}, output: {g: 0.4, r: 0.9, b: 0.3 }},
            {input: {age: 0.9, gender: 0}, output: {g: 0.0, r: 0.9, b: 0.0 }}
/*
            {input: {gender: 1}, output: {b: 1 }},

            {input: {gender: 0, age:  99}, output: {g: 0  , b: 0   }},
            {input: {gender: 0, age:  66}, output: {g: 0.3, b: 0.3 }},
            {input: {gender: 0, age:  33}, output: {g: 0.6, b: 0.6 }},
            {input: {gender: 0, age:   0}, output: {g: 0.9, b: 0.9 }},

            {input: {gender: 1, age:  99}, output: {g: 0  , r: 0   }},
            {input: {gender: 1, age:  66}, output: {g: 0.3, r: 0.3 }},
            {input: {gender: 1, age:  33}, output: {g: 0.6, r: 0.6 }},
            {input: {gender: 1, age:   0}, output: {g: 0.9, r: 0.9 }},
*/
        ]);

        function neuralNetwork(gender, age)
        {
            console.clear()

            let input = {
                gender: gender,
                age: age/100
            };

            console.log("input: ", input);

            var result = network.run(input);

            console.log("resultados: ", result);

            //document.body.style.backgroundColor = "rgb(" + result.r * 255 + "," + 0 + "," + result.b * 255 + ")";

            let divResult = document.getElementById("result");
            divResult.style.backgroundColor = "rgb(" + result.r * 255 + "," + result.g * 255 + "," + result.b * 255 + ")";

            console.log("rgb(" + result.r * 255 + "," + result.g * 255 + "," + result.b * 255 + ")");
            
            //return result;
        }

        function update()
        {
            let age = document.querySelector('input[name="age"]').value;
            let gender = document.querySelector('input[name="gender"]:checked').value;

            let inputAge = document.getElementById("ageInput");
            inputAge.innerHTML = "Edad: " + age;

            //let resultText = document.getElementById("resultText");
            //resultText.innerHTML = rgbToHex(neuralNetwork(gender,age));
            
            neuralNetwork(gender,age);
        }

        function rgbToHex(rgb) {
            return "#" + componentToHex(rgb.r) + componentToHex(rgb.g) + componentToHex(rgb.b);
        }

        function componentToHex(c) {
            var hex = c.toString(16);
            return hex.length == 1 ? "0" + hex : hex;
        }

    </script>

</body>
</html>